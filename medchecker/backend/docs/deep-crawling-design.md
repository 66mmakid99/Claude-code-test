# MEDCHECKER ë³‘ì› ì‚¬ì´íŠ¸ ì‹¬ì¸µ í¬ë¡¤ë§ ê¸°íš ì„¤ê³„

## ğŸ“‹ ê°œìš”

ë³‘ì› í™ˆí˜ì´ì§€ì˜ íŠ¹ìˆ˜í•œ êµ¬ì¡°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ê³ ê¸‰ í¬ë¡¤ë§ ì‹œìŠ¤í…œ ì„¤ê³„ ë¬¸ì„œì…ë‹ˆë‹¤.

### ë¬¸ì œì 
- ëŒ€ë¶€ë¶„ì˜ ë³‘ì› ì‚¬ì´íŠ¸ê°€ **ì´ë¯¸ì§€ ê¸°ë°˜**ìœ¼ë¡œ ì œì‘ë¨
- **íŒì—…, í”Œë¡œíŒ… ë°°ë„ˆ** ë“± ë™ì  ìš”ì†Œì— ìœ„ë°˜ ì½˜í…ì¸ ê°€ ë§ìŒ
- **JavaScript ë Œë”ë§** í•„ìš”í•œ SPA ì‚¬ì´íŠ¸ ì¦ê°€
- ë‹¨ì¼ í˜ì´ì§€ë§Œ ë¶„ì„í•˜ë©´ **ì„œë¸Œí˜ì´ì§€ì˜ ìœ„ë°˜ ì‚¬í•­ì„ ë†“ì¹¨**

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DeepCrawler Service                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Static        â”‚     â”‚   Dynamic       â”‚                   â”‚
â”‚  â”‚   Crawler       â”‚     â”‚   Crawler       â”‚                   â”‚
â”‚  â”‚ (Axios+Cheerio) â”‚     â”‚  (Playwright)   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                       â”‚                             â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                       â”‚                                         â”‚
â”‚                       â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Content Extraction                          â”‚   â”‚
â”‚  â”‚  â€¢ í…ìŠ¤íŠ¸ ì¶”ì¶œ                                           â”‚   â”‚
â”‚  â”‚  â€¢ ì´ë¯¸ì§€ ìˆ˜ì§‘                                           â”‚   â”‚
â”‚  â”‚  â€¢ íŒì—…/ëª¨ë‹¬ ê°ì§€                                        â”‚   â”‚
â”‚  â”‚  â€¢ í”Œë¡œíŒ… ìš”ì†Œ ê°ì§€                                      â”‚   â”‚
â”‚  â”‚  â€¢ ì„œë¸Œí˜ì´ì§€ ë§í¬ ì¶”ì¶œ                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                               â”‚                                 â”‚
â”‚                               â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              OCR Processing (ì„ íƒì )                     â”‚   â”‚
â”‚  â”‚  â€¢ Google Vision API                                     â”‚   â”‚
â”‚  â”‚  â€¢ Tesseract.js (ë¡œì»¬)                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                               â”‚                                 â”‚
â”‚                               â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Text Aggregation                            â”‚   â”‚
â”‚  â”‚  ëª¨ë“  ì†ŒìŠ¤ì˜ í…ìŠ¤íŠ¸ë¥¼ í•©ì³ì„œ ë¶„ì„ ê°€ëŠ¥í•˜ê²Œ               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ í•µì‹¬ ê¸°ëŠ¥

### 1. ì •ì  í¬ë¡¤ë§ (ê¸°ë³¸)
- **Axios + Cheerio** ê¸°ë°˜
- ë¹ ë¥¸ ì†ë„, ë‚®ì€ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©
- JavaScript ë Œë”ë§ ë¶ˆí•„ìš”í•œ ì‚¬ì´íŠ¸ìš©

```javascript
const crawler = new DeepCrawler();
const result = await crawler.crawlSite('https://hospital.co.kr');
```

### 2. ë™ì  í¬ë¡¤ë§ (Playwright)
- **JavaScript ë Œë”ë§** í›„ ì½˜í…ì¸  ì¶”ì¶œ
- **íŒì—… ìë™ ëŒ€ê¸° ë° ê°ì§€**
- **ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜** (ì„ íƒì )

```javascript
const crawler = new DeepCrawler({ usePuppeteer: true });
const result = await crawler.crawlSite('https://spa-hospital.co.kr', {
  captureScreenshot: true,
});
```

### 3. ì´ë¯¸ì§€ OCR
- **Google Vision API** (ê¶Œì¥, ë†’ì€ ì •í™•ë„)
- **Tesseract.js** (ë¡œì»¬, ë¬´ë£Œ)
- ì „í›„ì‚¬ì§„, ì´ë²¤íŠ¸ ë°°ë„ˆ ë“± ì´ë¯¸ì§€ ë‚´ í…ìŠ¤íŠ¸ ì¶”ì¶œ

```javascript
const crawler = new DeepCrawler({
  enableOCR: true,
  ocrProvider: 'google',
  googleVisionApiKey: 'YOUR_API_KEY',
});
```

### 4. íŒì—…/ëª¨ë‹¬ ê°ì§€
- CSS í´ë˜ìŠ¤ ê¸°ë°˜ ê°ì§€ (`popup`, `modal`, `layer` ë“±)
- `position: fixed/sticky` ìš”ì†Œ ê°ì§€
- Playwright ì‚¬ìš© ì‹œ **ì‹¤ì œ í‘œì‹œ ì—¬ë¶€** í™•ì¸

### 5. ì„œë¸Œí˜ì´ì§€ ìë™ íƒìƒ‰
- ì˜ë£Œ ê´€ë ¨ í˜ì´ì§€ ìš°ì„  íƒìƒ‰
- ê¹Šì´ ì œí•œ (ê¸°ë³¸ 2ë‹¨ê³„)
- ìµœëŒ€ í˜ì´ì§€ ìˆ˜ ì œí•œ (ê¸°ë³¸ 10ê°œ)

---

## ğŸ“Š ì¶œë ¥ í˜•ì‹

```javascript
{
  url: 'https://hospital.co.kr',
  success: true,
  
  pages: [
    {
      url: 'https://hospital.co.kr',
      title: 'ë³‘ì›ëª…',
      textContent: 'ì¶”ì¶œëœ í…ìŠ¤íŠ¸...',
      images: [...],
      popups: [...],
      floatingElements: [...],
    },
    // ... ì„œë¸Œí˜ì´ì§€ë“¤
  ],
  
  images: [
    {
      src: 'https://hospital.co.kr/images/before-after.jpg',
      alt: 'ì „í›„ì‚¬ì§„',
      ocrText: 'OCRë¡œ ì¶”ì¶œëœ í…ìŠ¤íŠ¸',
      ocrConfidence: 0.95,
    },
  ],
  
  popups: [
    {
      selector: '[class*="popup"]',
      text: 'íŒì—… ë‚´ìš©...',
      type: 'static',
    },
  ],
  
  stats: {
    totalPages: 5,
    totalImages: 12,
    totalPopups: 2,
    ocrProcessed: 3,
    processingTimeMs: 15000,
  },
}
```

---

## ğŸ”Œ ë¶„ì„ ì„œë¹„ìŠ¤ í†µí•©

```javascript
// analyzer-service.jsì— í†µí•© ì˜ˆì‹œ

async analyzeWebsiteDeep(url, options = {}) {
  // 1. ì‹¬ì¸µ í¬ë¡¤ë§
  const crawler = new DeepCrawler({
    enableOCR: options.enableOCR,
    maxSubpages: options.maxSubpages || 5,
  });
  
  const crawlResult = await crawler.crawlSite(url);
  
  // 2. ëª¨ë“  í…ìŠ¤íŠ¸ í•©ì¹˜ê¸°
  const combinedText = crawler.combineAllText(crawlResult);
  
  // 3. ê·œì¹™ ì—”ì§„ìœ¼ë¡œ ë¶„ì„
  const analysisResult = await this.ruleEngine.analyze(combinedText, {
    categories: ['medical_ad'],
  });
  
  // 4. ê²°ê³¼ ë°˜í™˜
  return {
    ...analysisResult,
    crawlStats: crawlResult.stats,
    pagesAnalyzed: crawlResult.pages.length,
    imagesProcessed: crawlResult.images.length,
  };
}
```

---

## ğŸ’° ë¹„ìš© ì¶”ì •

### Google Vision API
- **í…ìŠ¤íŠ¸ ê°ì§€**: ì›” 1,000ê±´ ë¬´ë£Œ, ì´í›„ $1.50/1,000ê±´
- ì´ë¯¸ì§€ë‹¹ ì•½ $0.0015

### ì˜ˆìƒ ë¹„ìš© (ì›” 1,000 ì‚¬ì´íŠ¸ ë¶„ì„ ì‹œ)
| í•­ëª© | ìˆ˜ëŸ‰ | ë‹¨ê°€ | ë¹„ìš© |
|------|------|------|------|
| Vision API | 3,000ê±´ | $1.50/1K | ~$4.50 |
| ì„œë²„ (Cloud Run) | - | - | ~$10 |
| **ì´ ë¹„ìš©** | | | **~$15/ì›”** |

---

## ğŸš€ êµ¬í˜„ ë¡œë“œë§µ

### Phase 1: ê¸°ë³¸ êµ¬í˜„ âœ…
- [x] ì •ì  í¬ë¡¤ë§ (Axios + Cheerio)
- [x] ì„œë¸Œí˜ì´ì§€ ìë™ íƒìƒ‰
- [x] íŒì—…/í”Œë¡œíŒ… ìš”ì†Œ ê°ì§€ (ì •ì )
- [x] ê¸°ë³¸ ì´ë¯¸ì§€ ìˆ˜ì§‘

### Phase 2: OCR í†µí•©
- [ ] Google Vision API ì—°ë™
- [ ] ì´ë¯¸ì§€ í•„í„°ë§ (OCR ëŒ€ìƒ ì„ ë³„)
- [ ] OCR ê²°ê³¼ ìºì‹±

### Phase 3: ë™ì  í¬ë¡¤ë§
- [ ] Playwright ì„¤ì¹˜ ë° ì—°ë™
- [ ] ì‹¤ì œ íŒì—… ê°ì§€
- [ ] ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜
- [ ] ë™ì  ì½˜í…ì¸  ëŒ€ê¸°

### Phase 4: ìµœì í™”
- [ ] ë³‘ë ¬ í¬ë¡¤ë§
- [ ] ê²°ê³¼ ìºì‹± (Redis)
- [ ] Rate Limiting
- [ ] ì—ëŸ¬ ë³µêµ¬

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **robots.txt ì¤€ìˆ˜** - í¬ë¡¤ë§ ì „ í™•ì¸ í•„ìš”
2. **Rate Limiting** - ì„œë²„ ë¶€í•˜ ë°©ì§€ (ìš”ì²­ ê°„ ë”œë ˆì´)
3. **ê°œì¸ì •ë³´ ë³´í˜¸** - í™˜ì ì •ë³´ ìˆ˜ì§‘ ê¸ˆì§€
4. **ì €ì‘ê¶Œ** - ì´ë¯¸ì§€ ì €ì¥ ì‹œ ì£¼ì˜

---

## ğŸ”— ê´€ë ¨ íŒŒì¼

- `backend/services/deep-crawler.js` - ì‹¬ì¸µ í¬ë¡¤ëŸ¬ êµ¬í˜„
- `backend/services/analyzer-service.js` - ë¶„ì„ ì„œë¹„ìŠ¤ (í†µí•© í•„ìš”)
- `backend/services/rule-engine.js` - ê·œì¹™ ì—”ì§„
